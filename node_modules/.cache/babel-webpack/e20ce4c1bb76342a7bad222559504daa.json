{"ast":null,"code":"import { MovieDescriptionViewComponent } from '../movie-description-view/movie-description-view.component';\nimport { GenreViewComponent } from '../genre-view/genre-view.component';\nimport { DirectorViewComponent } from '../director-view/director-view.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../fetch-api-data.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"../navigation/navigation.component\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/material/button\";\n\nfunction MovieCardComponent_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-card\");\n    i0.ɵɵelementStart(1, \"mat-dialog-content\");\n    i0.ɵɵelementStart(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵelement(5, \"img\", 2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-card-actions\");\n    i0.ɵɵelementStart(7, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function MovieCardComponent_mat_card_2_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.openGenreViewDialog(movie_r1.Genre.Name, movie_r1.Genre.Description);\n    });\n    i0.ɵɵtext(8, \" Genre \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function MovieCardComponent_mat_card_2_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.openDirectorViewDialog(movie_r1.Director.Name, movie_r1.Director.Bio, movie_r1.Director.ImagePath);\n    });\n    i0.ɵɵtext(10, \" Director \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function MovieCardComponent_mat_card_2_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.openMovieDescriptionViewDialog(movie_r1.Description);\n    });\n    i0.ɵɵtext(12, \" Synopsis \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function MovieCardComponent_mat_card_2_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.addToFavorites(movie_r1._id);\n    });\n    i0.ɵɵtext(14, \" Favorite \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(movie_r1.Title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", movie_r1.ImagePath, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", movie_r1.Title);\n  }\n}\n\nexport let MovieCardComponent = /*#__PURE__*/(() => {\n  class MovieCardComponent {\n    constructor(fetchApiData, dialog, snackBar) {\n      this.fetchApiData = fetchApiData;\n      this.dialog = dialog;\n      this.snackBar = snackBar;\n      this.movies = [];\n      this.FavoriteMovies = {};\n    }\n\n    ngOnInit() {\n      this.getMovies();\n      this.getFavorites();\n    } // Gets Movie API\n\n\n    getMovies() {\n      this.fetchApiData.getAllMovies().subscribe(resp => {\n        this.movies = resp;\n        console.log(this.movies);\n        return this.movies;\n      });\n    } //open genre details\n\n\n    openGenreViewDialog(name, description) {\n      this.dialog.open(GenreViewComponent, {\n        data: {\n          name,\n          description\n        }\n      });\n    } //open director details\n\n\n    openDirectorViewDialog(name, bio, image) {\n      this.dialog.open(DirectorViewComponent, {\n        data: {\n          name,\n          bio,\n          image\n        }\n      });\n    } //open movie description\n\n\n    openMovieDescriptionViewDialog(description) {\n      this.dialog.open(MovieDescriptionViewComponent, {\n        data: {\n          description\n        },\n        width: '300px'\n      });\n    }\n\n    getFavorites() {\n      const user = localStorage.getItem('user');\n      this.fetchApiData.getUser(user).subscribe(resp => {\n        this.FavoriteMovies = resp.FavoriteMovies;\n      });\n    }\n\n    addToFavorites(movieId) {\n      // const FavoriteMovies = localStorage.getItem('FavoriteMovies');\n      this.fetchApiData.addFavorite(movieId).subscribe(resp => {\n        this.snackBar.open('Added to favorites!', 'OK', {\n          duration: 2000\n        });\n        console.log(this.FavoriteMovies);\n        this.FavoriteMovies = resp.FavoriteMovies;\n      });\n      return this.FavoriteMovies.push(movieId);\n    }\n\n    isFavorite(movieID) {\n      return this.FavoriteMovies.includes(movieID);\n    }\n\n  }\n\n  MovieCardComponent.ɵfac = function MovieCardComponent_Factory(t) {\n    return new (t || MovieCardComponent)(i0.ɵɵdirectiveInject(i1.FetchApiDataService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  MovieCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MovieCardComponent,\n    selectors: [[\"app-movie-card\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[2, \"display\", \"flex\"], [4, \"ngFor\", \"ngForOf\"], [3, \"src\", \"alt\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"]],\n    template: function MovieCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navigation\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, MovieCardComponent_mat_card_2_Template, 15, 3, \"mat-card\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.movies);\n      }\n    },\n    directives: [i4.NavigationComponent, i5.NgForOf, i6.MatCard, i2.MatDialogContent, i6.MatCardTitle, i6.MatCardSubtitle, i6.MatCardActions, i7.MatButton],\n    styles: [\".mat-card[_ngcontent-%COMP%]{margin:10px;padding:0!important}.mat-card-actions[_ngcontent-%COMP%]{text-align:center;display:flex;padding-bottom:50px}.mat-card-title[_ngcontent-%COMP%]{text-align:center;margin:0;padding:20px}.mat-card-subtitle[_ngcontent-%COMP%]{margin:40px;display:flex;align-content:center;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}\"]\n  });\n  return MovieCardComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}